<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meal View</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../assets/css/styles.css">
</head>

<body>
    <div class="view-container container py-4">
        <div class="custom-box p-4" id="print-section">
            <!-- Ingredients Table -->
            <div class="card view-card mb-4">
                <div class="card-header view-header">Ingredients Required </div>
                <div class="card-body">
                    <table class="table table-bordered table-striped view-table">
                        <thead>
                            <tr>
                                <th>Ingredient</th>
                                <th>UOM</th>
                                <th>Qty (approx)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Raw Rice </td>
                                <td>Kg</td>
                                <td>1.0</td>
                            </tr>
                            <tr>
                                <td>Moong Dal </td>
                                <td>Kg</td>
                                <td>0.5</td>
                            </tr>
                            <tr>
                                <td>Toor Dal </td>
                                <td>Kg</td>
                                <td>1.0</td>
                            </tr>
                            <tr>
                                <td>Tamarind </td>
                                <td>Gram</td>
                                <td>50</td>
                            </tr>

                            <tr>
                                <td>Turmeric Powder </td>
                                <td>Gram</td>
                                <td>10</td>
                            </tr>
                            <tr>
                                <td>Black Pepper </td>
                                <td>Gram</td>
                                <td>20</td>
                            </tr>
                            <tr>
                                <td>Cumin Seeds </td>
                                <td>Gram</td>
                                <td>15</td>
                            </tr>
                            <tr>
                                <td>Ginger </td>
                                <td>Gram</td>
                                <td>25</td>
                            </tr>
                            <tr>
                                <td>Cashew Nuts</td>
                                <td>Gram</td>
                                <td>30</td>
                            </tr>
                            <tr>
                                <td>Mustard Seeds </td>
                                <td>Gram</td>
                                <td>10</td>
                            </tr>

                            <tr>
                                <td>Curry Leaves </td>
                                <td>Bunch</td>
                                <td>1</td>
                            </tr>

                            <tr>
                                <td>Onion </td>
                                <td>Kg</td>
                                <td>0.25</td>
                            </tr>
                            <tr>
                                <td>Tomato</td>
                                <td>Kg</td>
                                <td>0.25</td>
                            </tr>

                            <tr>
                                <td>Ghee </td>
                                <td>Gram</td>
                                <td>200</td>
                            </tr>
                            <tr>
                                <td>Oil </td>
                                <td>Litre</td>
                                <td>0.1</td>
                            </tr>
                            <tr>
                                <td>Salt </td>
                                <td>Gram</td>
                                <td>40</td>
                            </tr>
                        </tbody>
                    </table>

                </div>
            </div>
        </div>

        <!-- Buttons for Print and PDF -->
        <div class="text-center mt-4">
            <button class="btn btn-primary me-2" onclick="printPage()">ðŸ–¨ Print</button>
            <button class="btn btn-success" id="downloadBtn">â¬‡ Download PDF</button>
        </div>
    </div>

    <!-- JS Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.min.js"></script>

    <script>
        // Print
        function printPage() {
            window.print();
        }

        // Download PDF
        document.getElementById("downloadBtn").addEventListener("click", function () {
            const element = document.getElementById("print-section");

            const opt = {
                margin: 0.5,
                filename: 'Meal-View.pdf',
                image: {
                    type: 'jpeg',
                    quality: 1
                },
                html2canvas: {
                    scale: 2,
                    useCORS: true
                },
                jsPDF: {
                    unit: 'in',
                    format: 'a4',
                    orientation: 'portrait'
                }
            };

            // Proper promise chain
            html2pdf().set(opt).from(element).toPdf().get('pdf').then(function (pdf) {
                pdf.save('Meal-View.pdf');
            });
        });
    </script>
</body>

</html>